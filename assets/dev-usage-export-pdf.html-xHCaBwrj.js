const n=JSON.parse('{"key":"v-220e54fa","path":"/develop/usage/dev-usage-export-pdf.html","title":"Itext PDF 导出","lang":"zh-CN","frontmatter":{"description":"Itext PDF 导出 给我的文档系统添加了导出，本文记录PDF填坑小结。 PDF导出的实现 导出流 @RequestMapping(value = \\"export\\") public void exportPdfNew(String mdContent, String type, HttpServletResponse response) { \\tresponse.reset(); \\tresponse.setContentType(\\"multipart/form-data\\"); \\tString title = \\"file\\"; \\tString author = \\"pdai\\"; \\tString mdFileContent = \\"\\"; \\tServletOutputStream out = null; \\ttry { \\t\\tbyte[] fileBytes = null; \\t\\t \\t\\tString htmlFile = StringEscapeUtils.unescapeHtml4(mdContent); \\t\\t \\t\\tString cleanedHtmlFile = htmlFile.replace(\\"&lt;img\\", \\"&lt;img style=\\\\\\"display:inline-block;width:100%;max-width:650px;\\\\\\" \\"); \\t\\tcleanedHtmlFile = cleanHtml(cleanedHtmlFile); \\t\\tfileBytes = convert(author, cleanedHtmlFile); \\t\\tresponse.setHeader(\\"Content-Disposition\\", \\t\\t\\t\\t\\"inline; filename=\\\\\\"\\" + title + \\"_\\" + System.currentTimeMillis() + \\".pdf\\\\\\"\\"); \\t\\t\\t \\t\\tout = response.getOutputStream(); \\t\\tout.write(fileBytes); \\t\\tout.close(); \\t\\tout.flush(); \\t} catch (Exception e) { \\t\\tSystem.out.println(e); \\t} }","head":[["meta",{"property":"og:url","content":"http://www.gavin-james.com/develop/usage/dev-usage-export-pdf.html"}],["meta",{"property":"og:site_name","content":"Gavin James"}],["meta",{"property":"og:title","content":"Itext PDF 导出"}],["meta",{"property":"og:description","content":"Itext PDF 导出 给我的文档系统添加了导出，本文记录PDF填坑小结。 PDF导出的实现 导出流 @RequestMapping(value = \\"export\\") public void exportPdfNew(String mdContent, String type, HttpServletResponse response) { \\tresponse.reset(); \\tresponse.setContentType(\\"multipart/form-data\\"); \\tString title = \\"file\\"; \\tString author = \\"pdai\\"; \\tString mdFileContent = \\"\\"; \\tServletOutputStream out = null; \\ttry { \\t\\tbyte[] fileBytes = null; \\t\\t \\t\\tString htmlFile = StringEscapeUtils.unescapeHtml4(mdContent); \\t\\t \\t\\tString cleanedHtmlFile = htmlFile.replace(\\"&lt;img\\", \\"&lt;img style=\\\\\\"display:inline-block;width:100%;max-width:650px;\\\\\\" \\"); \\t\\tcleanedHtmlFile = cleanHtml(cleanedHtmlFile); \\t\\tfileBytes = convert(author, cleanedHtmlFile); \\t\\tresponse.setHeader(\\"Content-Disposition\\", \\t\\t\\t\\t\\"inline; filename=\\\\\\"\\" + title + \\"_\\" + System.currentTimeMillis() + \\".pdf\\\\\\"\\"); \\t\\t\\t \\t\\tout = response.getOutputStream(); \\t\\tout.write(fileBytes); \\t\\tout.close(); \\t\\tout.flush(); \\t} catch (Exception e) { \\t\\tSystem.out.println(e); \\t} }"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-12-26T09:56:01.000Z"}],["meta",{"property":"article:author","content":"gavin-james"}],["meta",{"property":"article:modified_time","content":"2023-12-26T09:56:01.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Itext PDF 导出\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-12-26T09:56:01.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"gavin-james\\",\\"url\\":\\"http://www.gavin-james.xyz\\"}]}"]]},"headers":[{"level":2,"title":"PDF导出的实现","slug":"pdf导出的实现","link":"#pdf导出的实现","children":[{"level":3,"title":"导出流","slug":"导出流","link":"#导出流","children":[]},{"level":3,"title":"清理HTML","slug":"清理html","link":"#清理html","children":[]},{"level":3,"title":"页眉页脚支持","slug":"页眉页脚支持","link":"#页眉页脚支持","children":[]}]},{"level":2,"title":"PDF中文支持","slug":"pdf中文支持","link":"#pdf中文支持","children":[{"level":3,"title":"通过ITextFontResolvert添加字体","slug":"通过itextfontresolvert添加字体","link":"#通过itextfontresolvert添加字体","children":[]}]},{"level":2,"title":"PDF Linux环境下中文字体乱码","slug":"pdf-linux环境下中文字体乱码","link":"#pdf-linux环境下中文字体乱码","children":[{"level":3,"title":"解决方法","slug":"解决方法","link":"#解决方法","children":[]}]}],"git":{"createdTime":1690160698000,"updatedTime":1703584561000,"contributors":[{"name":"gavin-james","email":"meaganlindesy1258@gmail.com","commits":2}]},"readingTime":{"minutes":3.26,"words":978},"filePathRelative":"develop/usage/dev-usage-export-pdf.md","localizedDate":"2023年7月24日","excerpt":"<h1> Itext PDF 导出</h1>\\n<blockquote>\\n<p>给我的文档系统添加了导出，本文记录PDF填坑小结。</p>\\n</blockquote>\\n<h2> PDF导出的实现</h2>\\n<h3> 导出流</h3>\\n<div class=\\"language-java line-numbers-mode\\" data-ext=\\"java\\"><pre class=\\"language-java\\"><code><span class=\\"token annotation punctuation\\">@RequestMapping</span><span class=\\"token punctuation\\">(</span>value <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"export\\"</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">void</span> <span class=\\"token function\\">exportPdfNew</span><span class=\\"token punctuation\\">(</span><span class=\\"token class-name\\">String</span> mdContent<span class=\\"token punctuation\\">,</span> <span class=\\"token class-name\\">String</span> type<span class=\\"token punctuation\\">,</span> <span class=\\"token class-name\\">HttpServletResponse</span> response<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n\\tresponse<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">reset</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\tresponse<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">setContentType</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"multipart/form-data\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n\\t<span class=\\"token class-name\\">String</span> title <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"file\\"</span><span class=\\"token punctuation\\">;</span>\\n\\t<span class=\\"token class-name\\">String</span> author <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"pdai\\"</span><span class=\\"token punctuation\\">;</span>\\n\\t<span class=\\"token class-name\\">String</span> mdFileContent <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"\\"</span><span class=\\"token punctuation\\">;</span>\\n\\n\\t<span class=\\"token class-name\\">ServletOutputStream</span> out <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">null</span><span class=\\"token punctuation\\">;</span>\\n\\t<span class=\\"token keyword\\">try</span> <span class=\\"token punctuation\\">{</span>\\n\\t\\t<span class=\\"token keyword\\">byte</span><span class=\\"token punctuation\\">[</span><span class=\\"token punctuation\\">]</span> fileBytes <span class=\\"token operator\\">=</span> <span class=\\"token keyword\\">null</span><span class=\\"token punctuation\\">;</span>\\n\\t\\t\\n\\t\\t<span class=\\"token class-name\\">String</span> htmlFile <span class=\\"token operator\\">=</span> <span class=\\"token class-name\\">StringEscapeUtils</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">unescapeHtml4</span><span class=\\"token punctuation\\">(</span>mdContent<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\t\\t\\n\\t\\t<span class=\\"token class-name\\">String</span> cleanedHtmlFile <span class=\\"token operator\\">=</span> htmlFile<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">replace</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"&lt;img\\"</span><span class=\\"token punctuation\\">,</span> <span class=\\"token string\\">\\"&lt;img style=\\\\\\"display:inline-block;width:100%;max-width:650px;\\\\\\" \\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\t\\tcleanedHtmlFile <span class=\\"token operator\\">=</span> <span class=\\"token function\\">cleanHtml</span><span class=\\"token punctuation\\">(</span>cleanedHtmlFile<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\t\\tfileBytes <span class=\\"token operator\\">=</span> <span class=\\"token function\\">convert</span><span class=\\"token punctuation\\">(</span>author<span class=\\"token punctuation\\">,</span> cleanedHtmlFile<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\t\\tresponse<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">setHeader</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"Content-Disposition\\"</span><span class=\\"token punctuation\\">,</span>\\n\\t\\t\\t\\t<span class=\\"token string\\">\\"inline; filename=\\\\\\"\\"</span> <span class=\\"token operator\\">+</span> title <span class=\\"token operator\\">+</span> <span class=\\"token string\\">\\"_\\"</span> <span class=\\"token operator\\">+</span> <span class=\\"token class-name\\">System</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">currentTimeMillis</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">+</span> <span class=\\"token string\\">\\".pdf\\\\\\"\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\t\\t\\t\\n\\t\\tout <span class=\\"token operator\\">=</span> response<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getOutputStream</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\t\\tout<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">write</span><span class=\\"token punctuation\\">(</span>fileBytes<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\t\\tout<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">close</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\t\\tout<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">flush</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\t<span class=\\"token punctuation\\">}</span> <span class=\\"token keyword\\">catch</span> <span class=\\"token punctuation\\">(</span><span class=\\"token class-name\\">Exception</span> e<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n\\t\\t<span class=\\"token class-name\\">System</span><span class=\\"token punctuation\\">.</span>out<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">println</span><span class=\\"token punctuation\\">(</span>e<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\t<span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","copyright":{"author":"gavin-james","license":"https://github.com/gavin-james/gavin-james.github.io/LICENSE"},"autoDesc":true}');export{n as data};
